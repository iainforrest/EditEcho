## Relevant Files

- `app/src/main/java/com/editecho/prompt/VoiceDNA.kt` - Updated to include the `UniversalDNA` data class and modified `VoiceDNACollection` to include `universalDNA` field.
- `app/src/main/java/com/editecho/data/VoiceDNARepository.kt` - Modified to load, log, and provide access to universal DNA patterns via `getUniversalDNA()` method.
- `app/src/main/java/com/editecho/prompt/VoicePromptBuilder.kt` - Refactored to integrate universal DNA patterns into all three prompt-building methods with proper formatting and precedence.
- `app/src/test/java/com/editecho/data/VoiceDNARepositoryTest.kt` - Updated to test universal DNA loading and access functionality.
- `app/src/test/java/com/editecho/prompt/VoicePromptBuilderTest.kt` - Enhanced with comprehensive tests to verify universal DNA integration across all prompt builder methods.

### Notes

- Unit tests should typically be placed alongside the code files they are testing (e.g., `MyComponent.tsx` and `MyComponent.test.tsx` in the same directory).
- Use `./gradlew test` to run all tests.
- We are building an Android app. Every parent task must finish with a successful and error-free build.


## Tasks

- [x] 1.0 Update Data Models for Universal DNA
  - [x] 1.1 In `VoiceDNA.kt`, create a new data class `UniversalDNA` with fields for `confidence`, `description`, `patterns`, and `warnings`.
  - [x] 1.2 In `VoiceDNA.kt`, update the `VoiceDNACollection` data class to include a nullable field: `universalDNA: UniversalDNA?`.
  - [x] 1.3 Run a build (`./gradlew build`) to ensure no compilation errors were introduced.
- [x] 2.0 Update VoiceDNARepository to Load Universal DNA
  - [x] 2.1 In `VoiceDNARepository.kt`, update the `Gson` parsing logic in `loadVoiceDNAPatterns` to correctly map the `universalDNA` object from the JSON file.
  - [x] 2.2 Add a log statement in `loadVoiceDNAPatterns` to confirm whether the `universalDNA` was loaded successfully.
  - [x] 2.3 Create a new public method, `getUniversalDNA(): UniversalDNA?`, to allow other classes to access the loaded universal patterns.
  - [x] 2.4 Update the `getStatistics` method to include a flag indicating if the `universalDNA` was loaded.
  - [x] 2.5 Run a build (`./gradlew build`) to ensure the changes are compiling correctly.
- [x] 3.0 Refactor VoicePromptBuilder to Integrate Universal DNA
  - [x] 3.1 In `VoicePromptBuilder.kt`, create a private helper function `buildUniversalDNASnippet(universalDNA: UniversalDNA?)` that formats the patterns into the specified markdown block.
  - [x] 3.2 Update `buildPromptFromDNA` to fetch the `universalDNA` from the repository and pass it to the other prompt-building methods.
  - [x] 3.3 Update `buildHighConfidencePrompt`, `buildLowConfidencePrompt`, and `buildFallbackPrompt` to accept the `UniversalDNA` object.
  - [x] 3.4 In each of these three methods, call `buildUniversalDNASnippet` and insert the resulting string into the main prompt template before the tone-specific sections.
  - [x] 3.5 Run a build (`./gradlew build`) to verify the refactoring is free of errors.
- [x] 4.0 Add/Update Unit Tests for DNA Integration
  - [x] 4.1 In `VoiceDNARepositoryTest.kt`, add a new test to verify that `getUniversalDNA()` returns the expected data from a test JSON file.
  - [x] 4.2 In `VoicePromptBuilderTest.kt`, add new tests to confirm that prompts generated by all three builder methods correctly include the "UNIVERSAL VOICE RULES" section.
  - [x] 4.3 Run all unit tests (`./gradlew test`) to ensure new and existing tests pass.
- [x] 5.0 Final Integration and Build Verification
  - [x] 5.1 Manually review a generated prompt from each of the three builder methods to confirm the final formatting is correct and clear.
  - [x] 5.2 Execute a final, clean application build (`./gradlew clean build`) to ensure the project is in a healthy state. 